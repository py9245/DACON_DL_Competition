좋아요. “파주시 축제 기획 의사결정 엔진”으로 문제를 재정의하고, 지금 가진 데이터(생활인구, 카드소비, 지역화폐, 물가, 관광관심도 등)를 중심으로 **라벨/피처 설계 → 모델 구성(베이스라인+딥러닝) → 지역 확장 전략**까지 한 번에 잡아드릴게요.

---

# 1) 목표를 4개 예측과제로 분해

1. **축제 시기 추천(주/주말 단위)**

   * 출력: 파주시 ‘다음 12개월’ 주차별 *축제매력지수*와 Top-N 추천 주차.
2. **예상 방문 연령 구성(10·20·30·40·50·60+ 비율)**

   * 출력: 연령대별 비중(퍼센트).
3. **숙박가격 전망(호텔/펜션/한옥 등 카테고리별)**

   * 출력: 평균 일일요금(ADR) 및 주말·성수기 프리미엄.
4. **운영 부스·소비 콘텐츠 믹스 추천**

   * 출력: 먹거리/체험/키즈/공연/로컬상생 등 부스 비중과 예상 매출 기여도.

> 발표 시 메시지: “**언제‧누가‧얼마를 쓰며‧무엇을 좋아하는가**를 한 화면에서 예측하고 조합까지 제안”.

---

# 2) 라벨(정답)과 피처(입력) 설계

## 2-1. 라벨 정의(감독학습용)

* **축제매력지수(Festival Demand Score, FDS)** *(주차별·읍면동 또는 상권 그리드 단위)*

  ```
  FDS = 0.4·(방문자수 z-score) 
      + 0.3·(지역화폐/카드 소비액 z-score: 외지인 비중 가중)
      + 0.2·(숙박 카테고리 결제건수 z-score)
      + 0.1·(SNS/검색 관심도 z-score)
  ```

  * 방문자수: 생활인구(외지 유입·체류시간 가중)
  * 소비액: 카드/지역화폐(숙박·식음·관광·교통 MCC 분해)
  * 관심도: 검색/커뮤니티(가능 시)
  * **과거 실제 축제 주**에는 +α 보너스(라벨 보정)
* **연령 구성**: 생활인구(연령대 제공) 혹은 통신·지자체 집계에서 얻는 *연령 분포*를 주차별 타깃으로 사용
* **숙박가격**: OTA/공공 통계의 *가격지수* 또는 카드데이터의 *객단가(숙박 MCC)*를 주·일 단위로 정렬
* **부스/콘텐츠 수요**: 소비 카테고리(먹거리, 체험, 공연·문화, 키즈, 지역농특산 등)별 결제액/건수의 주차별 분포

> 라벨이 부족한 경우: **약한감독(weak labeling)**
>
> * “축제 주간 후보”는 생활인구·소비 급증 주차(체인지포인트 탐지)로 자동 태깅 → 사람 검수로 골드라벨 소량 보강.

## 2-2. 피처 묶음(Static / Known / Observed)

* **Static(지역 고정 특성)**: 행정구역코드, 상권/POI 수(숙박·식음·체험), 접근성(지하철/버스/IC 거리), 자연·수변 여부, 인구/가구/아동·고령비, 상권 유형.
* **Known-future(캘린더·정책·가격 지수)**: 요일/공휴일/학기·방학/추석·설, *기상예보 요약*(강수확률·기온 밴드), 물가·환율 지수(레저 지출 탄력), 지역행사 캘린더(문화포털/지자체 공고).
* **Observed-history(시계열 관측치)**: 생활인구(내/외지인, 체류시간, 연령), 카드·지역화폐 소비(카테고리별), 숙박 가격/객단가, 검색량(가능 시), 과거 축제 플래그.

**다중 주기 처리**

* 기본 해상도는 **일 단위**로 통일 → 주/월 피처는 `rolling(7, 28, 84)` 평균·합·최대, `lag(7,14,28)`로 생성.
* 지역 해상도는 **법정동 또는 1km 격자**로 표준화(타 지역 확산을 대비).

---

# 3) “지금 데이터”로 가능한가?

가능합니다.

* **축제시기**: 생활인구(유입·체류) + 카드/지역화폐(소비) + 공휴일/계절성만으로도 강한 신호가 납니다.
* **연령층**: 생활인구의 연령 분해가 이미 타깃이자 피처입니다(과거 축제 주/유사행사 주로 학습).
* **숙박가격**: 카드의 숙박 카테고리 객단가/건수로 **가격지수 대용**을 만들고 예보·성수기 플래그로 예측.
* **부스/콘텐츠**: 카드 MCC·가맹점 업종을 **먹거리/체험/공연/키즈/로컬상생**으로 매핑하면 수요 비중이 나옵니다.

---

# 4) 추가 수집 추천(우선순위)

**필수(Tier-1)** – 성능 직결, 수집 난이도 낮음

1. **기상청**: 일최고/최저기온, 강수량/확률, 풍속, 체감온도(예보+실황)
2. **공휴일·학사·방학 캘린더**(교육청, 공공데이터포털)
3. **지자체·문화포털 행사 캘린더**(행사명/장소/기간/규모·예산)
4. **POI/숙박 재고**: 숙박업 인허가, 객실 수(공공데이터)
5. **대중교통·접근성**: 환승센터, KTX/광역버스 정류장까지의 거리/시간

**가치 높음(Tier-2)** – 있으면 추천 품질 상승
6) **OTA 메타 가격지수(스크랩/제휴)**: 주말/성수기 ADR
7) **검색·SNS 트렌드**: “파주+축제/행사/불꽃/벚꽃/호수공원/헤이리/프로방스…” 키워드 지수
8) **주차/교통 혼잡도**: 시·군 교통 데이터(혼잡지수는 방문규모 대용)

---

# 5) 모델 추천 (베이스라인 → 딥러닝 멀티태스크)

## 5-1. 베이스라인(빠른 가시화/설득용)

* **시기추천/숙박가격**: LightGBM/XGBoost (tabular + 시계열 랙/롤링 피처)
* **연령구성**: LightGBM 멀티아웃풋 회귀(연령대별 비율 → softmax 정규화)
* **부스 믹스**: CatBoost 다중회귀(카테고리별 매출 비중) + **예산 제약 하 knapsack 최적화**로 부스 수량 추천
  → 빠르고 해석력 좋으며, 데이터 적어도 안정적.

## 5-2. 딥러닝 본선용(창의성/확장성 점수)

* **Backbone: Multi-Task Temporal Fusion Transformer (MT-TFT)**

  * 입력: [Static, Known-future, Observed-history], 계절성·휴일 임베딩
  * 출력 헤드 4개:

    1. FDS 회귀(주차별 점수)
    2. 연령 분포(softmax)
    3. 숙박가격 회귀
    4. 카테고리 매출 비중(softmax/Dirichlet)
  * 장점: 서로 다른 타깃을 **공유 인코더**로 학습해 데이터 희소성을 보완, *주/월 다중지평선 예측*에 강함.
* **텍스트 혼합(선택)**: 축제 소개문/후기/리뷰가 있다면 `bge-m3` 임베딩 → 토픽(BERTopic) → **콘텐츠 피처**로 주입.
* **지역 확산용 GNN(+α, 선택)**: 읍면동 간 유사도(유동인구·도로거리·통근흐름) 그래프를 구성, Gated GNN/GraphWaveNet으로 **인접 지역 효과**까지 반영.

---

# 6) 학습·검증 전략(실현성 & 재현성)

* **시계열 롤링 검증**: 2019–2023 학습, 2024 검증, 2025 예측(예시).
* **지표**

  * FDS/숙박가격: MAE, sMAPE
  * 연령분포: KL-Divergence 또는 Cross-Entropy(정규화된 분포)
  * 부스믹스: 카테고리 비중 MSE + 예측 매출 총액
  * **시기추천 품질**: `Hit@K`(실제 성과 상위 주차가 Top-K에 포함되는지), `NDCG`
* **피처 중요도/SHAP**로 해석 제공 → 정책 연계·설득력 강화.

---

# 7) 데이터 모델(스키마) 제안 — “전국/지역 분리 가능”

```text
fact_day_area
- date (YYYY-MM-DD), year, week, holiday_flag, school_break_flag
- area_id (법정동/그리드), city/province
- pop_total, pop_ext_inflow, pop_stay_minutes, pop_age_10, ... , pop_age_60p
- spend_total, spend_food, spend_entertain, spend_lodging, spend_kids, ...
- local_currency_amt
- lodging_tx_cnt, lodging_avg_ticket (or price_index_proxy)
- weather_temp_max, weather_temp_min, rain_mm, wind, ...
- poi_lodging_cnt, poi_food_cnt, poi_kids_cnt, ...
- event_flag (공식 축제/행사), event_scale (있으면)
- search_index (옵션)

dim_area (정적)
- area_id, region_name, population, households, road_access_score, ...
```

* **전국 데이터**는 동일 스키마에 쌓고 `area_id`로 지역을 필터링 → “전국으로 학습, 파주로 추론” 또는 “파주 미세튜닝(LoRA/파라미터 일부만 재학습)” 두 모드 모두 가능.
* 일/주/월 혼합 원본은 **일 단위 표준화** 후 `resample('W')`로 주간 라벨·피처 생성.

---

# 8) 산출물 UX (발표/시演)

* **달력 뷰**: 주차별 FDS 히트맵 + Top-3 추천 주차 배지
* **타깃 고객**: 선택 주차의 **연령 분포 도넛**
* **숙박/혼잡 전망**: ADR·점유율 지표 게이지(예측)
* **부스 구성 추천**: 예산/면적 제약 입력 → 카테고리별 권장 부스 수량 & 예상 매출
* **What-if**: “우천 확률 60%” 체크 시 재예측(강수 민감도)

---

# 9) 다른 지역 확산 전략(연계성 최고점 노림)

* **표준화 스키마 + 코드북(MCC→콘텐츠 카테고리 맵)**로 타 지자체 즉시 적용.
* **도메인 적응**:

  * 간단: 지역 one-hot + 지역별 bias(하이러키컬 베이지안)
  * 고급: *AdaBN* / *fine-tune head only*로 파인튜닝(라벨 적을 때 효과적).
* **정책 연계**: 지역화폐, 관광 활성화, 교통(혼잡 완화) 등 **정부 데이터 연계** → 확장성 강조.

---

# 10) 구현 로드맵(1주 내 MVP → 결선 고도화)

**Day 1–2** 데이터 표준화(일 단위), 라벨 FDS 계산, 베이스라인 LGBM 3모델(FDS/연령/숙박)
**Day 3–4** 부스 카테고리 맵핑+최적화, 대시보드(Plotly/Dash or Streamlit)
**Day 5–7** MT-TFT 멀티태스크 학습(파주+전국), SHAP/기여도, 시나리오 UI

---

## 한줄 결론

* **가능/유의미**합니다. 지금 가진 **생활인구×소비×지역화폐**만으로도 축제 시기·연령·콘텐츠·숙박을 충분히 예측할 수 있고,
* 베이스라인(LGBM)으로 **빠른 승점** → 결선에서는 **멀티태스크 TFT**로 창의성/활용성을 끌어올리는 전략을 추천드립니다.

필요하시면, 위 스키마 그대로 쓰는 **피처 생성 스크립트 템플릿**과 **LGBM 베이스라인 노트북**을 바로 드릴게요.
