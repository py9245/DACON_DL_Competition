# 주단위 데이터 전처리 가이드 (사회활성화 시점 딥러닝)

주간 단위의 설문·검색량 데이터를 활용해 사회활성화 시점을 학습하기 위해, 다음 다섯 가지 전처리 전략을 추천합니다. 대상 파일은 `data_csv_type/주단위/설문_국내_여행_비용_지출_의향_통합.csv`, `.../설문_국내_여행_비용_지출_특성_통합.csv`, `.../설문_국내_여행지역_관심도.csv`, `.../설문_국내여행_TOP10_트랜드_데이터_결과.csv`입니다.

1. **주차 정규화 및 연속 시계열 재구성**
   - `연도`, `월`, `주차`, `EXAMIN_BEGIN_DE`, `week_label`을 ISO 주차(예: `YYYYWW`)와 절대 주차 인덱스로 통합해 인접 주차 간 간격을 일정하게 맞춥니다.
   - 누락된 주차는 주차별 기준 피처(응답자 수, 검색량 합계 등)를 0 또는 최근 값으로 보간하고, 신규 주차 여부를 나타내는 플래그를 추가해 시계열 모델이 공백과 변화를 구분할 수 있게 합니다.
   - 명절·방학 등 사회활성화 이벤트 캘린더를 주차 기준으로 연결해 딥러닝 입력에 계절성과 특수일 효과를 함께 제공할 수 있도록 합니다.

2. **이산 응답 값의 정량화·임베딩**
   - `ALL_TURSM_TOUR_EXPNDTR_INTEN_VALUE`, `SU_TOUR_INTRST_VALUE`처럼 “훨씬 더 많다→훨씬 더 적다”와 같이 순서가 있는 서술형 응답은 명시적 순위를 부여해 정수 스케일로 변환하거나, 각 응답의 조건부 목표값을 이용한 타깃 인코딩을 적용합니다.
   - 순서가 없는 범주(`HSHLD_INCOME_DGREE_NM`, `OCCP_NM`, `SRCHWRD_NM`)는 빈도 기반 인코딩 또는 딥러닝 임베딩 레이어 입력을 위한 ID 매핑을 수행합니다.
   - “모름/무응답”은 별도 카테고리로 유지해 불확실성 자체가 학습될 수 있게 하고, 응답 신뢰도 가중치를 병행해 모델이 잡음을 덜 민감하게 처리하도록 합니다.

3. **다중 소스 융합과 주간 메타 피처 생성**
   - 네 개의 CSV를 `연도-월-주차` 키로 조인해 주차별 통합 테이블을 구성하고, 설문 항목별 응답 비율·분산, 소비 지출 구간별 평균 티켓, 지역 관심도의 편차 등을 계산해 피처를 확장합니다.
   - `SRCHWRD_NM`에 대해서는 주차별 상위 키워드의 TF-IDF 벡터나 사전학습된 임베딩을 평균/가중평균해 트렌드 변화를 수치화합니다.
   - 주별 응답자 수, 검색량 합계, 전주 대비 증감률, 4/12주 이동평균과 편차 등을 함께 생성해 단기·중기 추세를 동시에 학습할 수 있도록 합니다.

4. **사회활성화 지표·타깃 정의**
   - 소비 지출 의향(`DMSTC_TURSM_TOUR_EXPNDTR_INTEN_VALUE`)과 실제 지출(`TOUR_TOT_CT_VALUE`), 지역 관심도 확대(`..._INTRST_VALUE`의 “커졌다” 비중), 검색량 급증(`SCCNT_SM_VALUE`)을 결합해 주차별 복합 활성화 지수를 산출합니다.
   - 지수를 이용해 임계치 기반의 활성화 레이블(예: 상위 20% → 활성화, 하위 40% → 비활성화, 나머지 → 중간)을 정의하거나, 연속값을 그대로 회귀 타깃으로 삼아 시점 예측 모델을 구성합니다.
   - 추가로, 전주 대비 지수 변화율(∆)을 별도 피처로 두어 모델이 “활성화 전 징후”를 학습하도록 유도합니다.

5. **결측·이상치 처리 및 샘플 균형 조정**
   - 설문 데이터의 `모름`, `무응답`은 가장 높은 결측 비율을 보이는 주차를 파악한 뒤, 동일한 속성 분포를 가진 집단의 중앙값/최빈값으로 보완하거나, 마스킹 피처를 추가해 모델이 유효표본 여부를 판별할 수 있게 합니다.
   - 검색량·지출 금액의 급격한 스파이크는 로그 변환이나 윈저라이징을 적용해 극단값이 학습을 지배하지 않도록 합니다.
  - 활성화 직전/직후 주차가 데이터에서 드물다면, 시간 순서를 유지하는 시계열 증강(슬라이딩 윈도우 분할, 축소·확대 리샘플링)이나 가중 손실 함수를 활용해 클래스 불균형을 해소합니다.

위 단계를 거치면, 주차별로 정렬된 고정 길이 피처 벡터를 확보할 수 있어 RNN·Temporal CNN·Transformer 계열 모델이 사회활성화 시점의 패턴을 안정적으로 학습할 수 있습니다.

## 교차검증 관점에서의 점검 포인트
- **시계열 전용 분할**: 임의 셔플 대신 주차 순서를 보존한 확장 창(expanding window) 또는 슬라이딩 윈도우 방식으로 훈련/검증 세트를 나눠 미래 누수 없이 성능을 확인합니다.
- **데이터 소스 일관성**: 각 폴드마다 네 개 소스의 조인 결과가 동일한 주차 집합을 담고 있는지 점검하고, 누락·추가 주차가 발견되면 해당 폴드에서 제외하거나 보간 로직을 재검토합니다.
- **피처 스케일·정규화**: 폴드별로 평균·표준편차가 크게 달라지는지 확인해, 필요 시 주차 기반 스케일링 또는 로버스트 스케일링 전략을 적용합니다.
- **타깃 분포 안정성**: 활성화 지표의 상·하위 비율이 훈련·검증 분할마다 크게 달라지지 않는지 확인하고, 편차가 크면 가중치 조정이나 임계치를 재설계합니다.
